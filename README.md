# 스프링이란?
자바 엔터프라이즈 애플리케이션 개발에 사용되는 애플리케이션 프레임워트이다.
애플리케이션의 바탕이 되는 틀과 공통 프로그래밍 모델, 기술 API 등을 제공해준다.

-  애플리케이션의 기본 틀 : 스프링 컨테이너
스프링은 애플리케이션 컨텍스트라는 컨테이너를 제공하는데, 이것은 애플리케이션 컴포넌트를 생성하고 관리한다. 애플리케이션 컴포넌트 또는 빈들은 스프링 애플리케이션 컨텍스트 내부에서 서로 연결되어 완전한 애플리케이션을 만든다.

# 의존성 주입
빈의 상호연결은 의존성 주입(DI) 패턴을 기반으로 수행되고, 애플리케이션 컴포넌트에서 의존(사용)하는 다른 빈의 생성과 관리를 자체적으로 하는 대신 별도의 개체(컨테이너)가 해주며, 이 개체에서는 모든 컴포넌트를 생성, 관리하고 해당 컴포넌트를 필요로 하는 빈에 주입(연결)한다.


- @Configuration 어노테이션
지금까지의 스프링 버전에서는 컴포넌트 및 다른 컴포넌트와의 관계를 나타내는 하나 이상의 XML 파일을 사용해서 빈을 상호 연결하도록 스프링 애플리케이션 컨텍스트에 알려주었다.

최신 버전의 스프링에서는 자바 기반의 구성 configuration이 더많이 사용된다.

configuration 어노테이션이 각 빈을 스프링 애플리케이션 컨텍스트에 제공하는 구성 클래스라는 것을 스프링에게 알려준다. 구성 클래스의 메서드에는 @Bean 어노테이션이 지정되어 있으며, 이것은 각 메서드에서 반환되는 객체가 애플리케이션 컨텍스트의 빈으로 추가되어야 한다는 것을 나타낸다.

## 공통 프로그래밍 모델 : loC/DI, 서비스 추상화, AOP
프레임워크는 애플리케이션을 구성하는 오브젝트가 생성되고 동작하는 방식에 대한 틀을 제공해줄 뿐만 아니라,
코드가 어떻게 작성돼야 하는지에 대한 기준도 제시해준다. 이것을 모델이라하며 스프링은 세가지 핵심 모델을 지원한다.


- **제어의 역전과 의존성 주입 : IoC(역전) DI(의존성 주입)**
빈 팩토리와 애플리케이션 컨텍스트

오브젝트의 생명주기와 의존관계에 대한 프로그래밍 모델
스프링은 유연하고 확장성이 뛰어난 코드를 만들 수 있게 도와주는 객체지향 설계 원칙과 디자인 패턴의 핵심 원리를 담고 있는 loC/DI 프레임워크의  근간으로 삼고있다.

- IOC(Inversion of Control : 제어의 역전)
자바 코드를 작성해 객체를 생성할 때는 객체가 필요한 곳에 직접 생성을 해야 한다.

```
public class A {
  b = new B(); // 클래스 A에서 new 키워드로 클래스 B의 객체 생성
}
```

제어의 역전은 다른 객체를 직접 생성하거나 제어하는 것이 아닌, 외부에서 관리하는 객체를 가져와 사용하는 것을 말한다. 위의 코드에서 제어의 역전을 적용한 코드는 아래와 같다.

~~~
public class A {
  private B b; // 코드에서 객체를 생성하지 않고, 어디선가 받아온 객체를 b에 할당한다.
}
~~~
클래스 B 객체를 직접 생성하는게 아니라 어딘가에서 받아와 사용하고 있다. 스프링은 **스프링 컨테이너가 객체를 관리, 제공하는 역할**을 해서 가능한 것이다.



- DI(Dependency Injection : 의존성 주입)
스프링에서는 객체들을 관리하기 위해 제어의 역전을 사용하고, 제어의 역전을 구현하기 위해 의존성 주입을 사용한다.
DI는 어떤 클래스가 다른 클래스에 의존한다는 것이다. @Autowired라는 어노테이션은 스프링 컨테이너에 있는 빈이라는 것을 주입하는 역할을 하며, **빈은 쉽게 말해서 스프링 컨테이너에서 관리하는 객체를 말한다.** 

IOC에서 사용한 코드에서는 B객체를 생성했지만 어딘가에서 B b;라고 선언 했을 뿐 직접 객체를 생성하지는 않고 있다.
```
public class A {
  @Autowired
  B b; // A에서 B를 주입받음
}
```
이렇게 객체를 주입받고 있는 것이다.

기존의 자바 코드라면 클래스 A에서 B객체를 쓰고 싶을 때 직접 생성했지만, 스프링의 경우는 클래스 A에서 B객체를 쓰고 싶을 때 스프링 컨테이너에서 객체를 주입받아 사용한다. 이것이 IoC/DI 개념이다.


- ** PSA(Portable Service Abstraction : 서비스 추상화)**
스프링을 사용하면 환경이나 서버, 특정 기술에 종속되지 않고 **이식성**이 뛰어나며 유연한 애플리케이션을 만들 수 있다.
이를 가능하게 해주는 것이 바로 서비스 추상화이다. 구체적인 기술과 환경에 종속되지 않도록 유연한 추상 계층을 두는 방법이다. 예로 클라이언트의 매핑과 클랫, 메서드의 매핑을 위한 어노테이션이 있다. 스프링에서 데이터베이스에 접근하기 위한 기술로 JPA, MyBatis, JDBC 같은 것들이 있는데 여기서 어떤 기술을 사용하든 일관된 방식으로 데이터베이스에 접근하도록 인터페이스를 지원하는 것이다. 또 예시로 WAS도 PSA의 예 중 하나로 코드는 그대로 두며 WAS를 톰캣이 아닌 언더토우, 네티와 같은 다른 곳에서 실행하도 기존 코드를 그대로 사용할 수 있다.

- **AOP(Aspect Oriented Programming : 관점지향 프로그래밍)**
프로그래밍에 대한 관심을 **핵심관점, 부가 관점으로 나누어서 관심 기준으로 모듈화**를 하는 걸 의미한다.

애플리케이션 코드에 산재해서 나타나는 부가적인 기능을 독립적으로 모듈화하는 프로그래밍 모델이다. 스프링은 AOP를 이용해서, 다양한 엔터프라이즈 서비스를 적용하고도 깔끔한 코드를 유지할 수 있게 해준다.

예를 들어 계좌이체, 고객 관리를 하는 프로그램이라면 로깅 로직인 지금까지 벌어진 일을 기록하기 위한 로직과 여러 데이터를 관리하기 위한 데이터베이스 연결 로직이 포함된다. 이때 핵심 관점은 계좌이체와 고객 관리 로직이며 부가 관점이 로깅과 데이터베이스 연결로직이 된다. 로깅과 데이터베이스 연결은 모두 계좌이체와 고객관리에 필요하다. 여기에 AOP 관점을 적용한다면 부가 관점에 해당하는 로직을 모듈화해서 개발한다. 그러면 부가 관점 코드를 핵심 관점 코드에서 분리할 수 있게 된다. 그 결과 좀 더 핵심 관점 코드에만 집중할 수 있게 되며 변경과 확장에도 유연하게 대응할 수 있다.

```
IoC :  객체의 생성과 관리를 개발자가 하는게 아닌 프레임워크가 대신 한다.
DI : 외부에서 객체를 주입받아 사용한다.
AOP : 프로그래밍을 할 때 핵심 관점과 부가 관점을 나누어서 개발한다.
PSA : 어느 기술을 사용하던 일관된 방식으로 처리한다.
```


### 빈과 스프링 컨테이너
- **스프링 컨테이너 :**
스프링은 스프링 컨테이너를 제공한다. 스프링 컨테이너는 빈을 생성하고 관리한다. 즉, 빈이 생성되고 소멸되기까지 생명주기를 이 스프링 컨테이너가 관리하는 것이다. 또한 @Autowired 같은 어노테이션을 사용해 빈을 주입받을 수 있게 DI를 지원한다.

- **빈 :**



### 기술 API란? 
개발의 다양한 영역에 바로 활용할 수 있는 방대한 양의 기술 API를 제공한다. UI 작성은 물론이고 웹 프레젠테이션 계층, 비즈니스 서비스 계층, 기반 서비스 계층, 도메인 계층, 데이터 액세스 계층 등에서 필요한 주요 기술을 스프링에서 일관된 방식으로 사용할 수 있도록 지원해주는 기능과 전략 클래스 등을 제공한다. 스프링이 제공하는 API와 지원 기술은 모두 스프링의 프로그래밍 모델에 따라 작성되어 있기 때문에, 이를 가져다 쓰는 것만으로도 스프링의 프로그래밍 모델을 코드에 자연스럽게 적용할 수 있다.


### 스프링 자동구성
스프링 부트의 중요한 개념 중 하나로, 어플리케이션이 최소한의 설정만으로도 실행되게 여러 부분을 자동으로 구성해준다.
추후 개발을 하다가 직접 구성하지 않은 부분인데 스프링에서 자동으로 어떻게 구성했는지 확인할 사항이 오기 때문에 자동 구성 확인할 방법을 알아두어야 한다. 한다.

- **자동 설정이란?**  스프링 부트는 서버를 시작할 때 구성파일을 읽어와서 설정하는데 이것이 자동 설정이다.
- 자동설정 위치 : META-INF 에 있는 spring.factories
자동설정 위치에서 spring-boot-autocinfigure/spring.factories 파일을 열어보면 프로젝트에 쓰일 구성 후보들이 적혀 있고 스프링 부트를 시작할 때 이 파일에 설정되어 있는 클래스는 모두 불러오고 이후에는 프로젝트에서 사용할 것들만 자동으로 구성해 등록해준다.

스프링 부트에서는 빈이 자동으로 등록되고 구성되며 만약 자동 구성이 없다면 개발자가 특정 기술을 사용할 때마다 설정해야 하는 값을 모두 직접 선정해야 한다.


### 스프링 initializr 프로젝트 구조 생성 방법
- http://start.spring.io
- 명령행에서 curl 명령을 사용
- 명령해서 스프링 부트 CLI(command line interface)를 사용
- Spring Tool Suite IDE 사용으로 새로운 프로젝트 생성
- IntelliJ 또는 Eclipse IDE 사용
- NetBeans IDe 사용



### 레코드
레코드는 데이터 전달을 목적으로 하는 객체를 더 빠르고 간편하게 만들기 위한 기능으로 레코드는 상속을 할 수 없고 파라미터에 정의한 필드는 private final로 정의된다. 또한 레코드는 게터를 자동으로 만들기 때문에 어노테이션이나 메서드로 게터 정의를 하지 않아도 된다.




# 스프링 모듈



